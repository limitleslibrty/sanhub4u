<!DOCTYPE html>
<html>
 <head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>marvel universe</title>
    <link rel="stylesheet" href="style.css">
 </head>
 <body>
  <br />
  <h1 align="center">Marvel Universe</h1>
  <br />
  
  <hr />
    <h2 align="center">Phase 1</h2>
    <hr />
    <br /><br />
    <div id="moviesContainer">
     
     
 <!--movies-->
     
     
     
     
     
   <a href="ironman1.htm">
     <div class="movie-card">
      <img src="https://upload.wikimedia.org/wikipedia/en/0/02/Iron_Man_%282008_film%29_poster.jpg" alt="Avengers">
      <h3 class="movie-title">Iron man 1 <br />full hd</h3>
      
     </div>
    </a> 
    
                <a href="incrediblehulk.htm"><div class="movie-card">
        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR7NYkGqrQwNeqiHil_obghSOohk9xfxSczo_dLx-iR6qSKQJDzrn7ot-Q&s=10" alt="Joker">
        <h3 class="movie-title" >The Incredible Hulk</h3>

       </div> 
       </a>
    
     <a href="ironman2.htm">
  <div class="movie-card">
   <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTAf4RPk8_B-nS74CmpVcONYN2pvk1BCfr1lXYvnTp7mjWPKkoqvAeJHgI&s=10" alt="Joker">
   <h3 class="movie-title">Iron Man 2 <br /> (2003)</h3>
  </div>
 </a>
 
 
 
   <a href="thor1.htm">
  <div class="movie-card">
   <img src=" https://myimg.click/images/2020/05/04/MV5BOGE4NzU1YTAtNzA3Mi00ZTA2LTg2YmYtMDJmMThiMjlkYjg2XkEyXkFqcGdeQXVyNTgzMDMzMTg._V1_SY1000_CR006741000_AL_.jpg" alt="Joker">
   <h3 class="movie-title">
    Thor 2011 <br />
    Hd
   </h3>
  </div>
 </a>
  
   <a href="captainamerica1.htm">
  <div class="movie-card">
   <img src=" https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR5Omk7Z4N9AEcSMz6Uvpw4UJB1tOQMtFmWYbi-zvf0BQtebp_sPTv17ZaU&s=10" alt="Joker">
   <h3 class="movie-title">
    Captain Ame <br />-rica 2011
   </h3>
  </div>
 </a>
 
 <a href="theavengers.htm">
 <div class="movie-card">
 <img src="https://resizing.flixster.com/-XZAfHZM39UwaGJIFWKAE8fS0ak=/v3/t/assets/p8815512_p_v8_ax.jpg " alt="Joker">
 <h3 class="movie-title">
 The Avengers 
 <br />Hd
 </h3>
 </div>
</a>
 
   <br /><br /> <br />
  
  <hr />
  <h2 align="center">Phase 2</h2>
  <hr />
  <br /><br />
  
   <a href="ironman3.htm">
  <div class="movie-card">
   <img src=" https://m.media-amazon.com/images/M/MV5BMjIzMzAzMjQyM15BMl5BanBnXkFtZTcwNzM2NjcyOQ@@._V1_FMjpg_UX1000_.jpg" alt="Joker">
   <h3 class="movie-title">
    Iron Man 3 <br />
    Hindi
    </h3>
  </div>
 </a>
 
  <a href="thor1.htm">
 <div class="movie-card">
 <img src=" https://myimg.click/images/2020/05/04/MV5BOGE4NzU1YTAtNzA3Mi00ZTA2LTg2YmYtMDJmMThiMjlkYjg2XkEyXkFqcGdeQXVyNTgzMDMzMTg._V1_SY1000_CR006741000_AL_.jpg" alt="Joker">
 <h3 class="movie-title">
 Thor 2011 <br />
 Hd
 </h3>
 </div>
</a>
 
 <a href="captainamerica2.htm">
 <div class="movie-card">
  <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQDMIl_OR64vI_ujStqfz99d1mVML3q4_wDQHQg3kFOeVJWlOfLmQdNxQE&s=10 " alt="Joker">
  <h3 class="movie-title">
   Captain Ame <br />-rica 2 
   
  </h3>
 </div>
</a>

<a href="gof1.htm">
 <div class="movie-card">
 <img src=" https://images.moviesanywhere.com/959ef1bcb5c9a8e31e384f8d20384efa/7b57798c-b6d2-4b46-8487-bc0ca59934ec.jpg" alt="Joker"> <h3 class="movie-title">
 Guardians Of <br />Galaxy 1
 </h3>
 </div>
</a>

 <a href="ageofultron.htm">
 <div class="movie-card">
 <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRz2qUsDVD4uANYiZNKzLZWoqaJqewguFPl8NeczVNe7krCdKlTsDWs5wI&s=10 " alt="Joker">
 <h3 class="movie-title">
 Age of <br />Ultron 
 </h3>
 </div>
</a>

  <a href="antman1.htm">
 <div class="movie-card">
 <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRa1uKL1r8cBqqcltueZGsnnIE7iWuqrE3-2WMsyFC0rjZ8Fmq4B5BlKao&s=10 " alt="Joker">
 <h3 class="movie-title">
 Ant Man <br />2015
 </h3>
 </div>
</a>
 

    
   </div>
   <script>
 const apiKey = "ed492c82af4b0bff90d8d23998f3d393";
 
 // Fetch movie poster
 async function getMoviePoster(title, year = "") {
  const cacheKey = `thumb_${title.toLowerCase().replace(/\s+/g, "_")}_${year}`;
  const cached = JSON.parse(localStorage.getItem(cacheKey) || "null");
  const now = Date.now();
  
  if (cached && now - cached.timestamp < 7 * 24 * 60 * 60 * 1000) {
   return cached.url;
  }
  
  try {
   const url = `https://api.themoviedb.org/3/search/movie?query=${encodeURIComponent(title)}${year ? `&year=${year}` : ""}&api_key=${apiKey}`;
   const res = await fetch(url);
   const data = await res.json();
   const poster = data.results?.[0]?.poster_path;
   if (poster) {
    const fullUrl = `https://image.tmdb.org/t/p/w500${poster}`;
    localStorage.setItem(cacheKey, JSON.stringify({ url: fullUrl, timestamp: now }));
    return fullUrl;
   }
  } catch (e) {
   console.warn("Movie poster fetch failed:", title);
  }
  
  return "";
 }
 
 // Fetch webseries poster
 async function getTVPoster(title, year = "") {
  const cacheKey = `tv_thumb_${title.toLowerCase()}_${year}`;
  const cached = localStorage.getItem(cacheKey);
  if (cached) return cached;
  
  try {
   const url = `https://api.themoviedb.org/3/search/tv?query=${encodeURIComponent(title)}${year ? `&first_air_date_year=${year}` : ""}&api_key=${apiKey}`;
   const res = await fetch(url);
   const data = await res.json();
   const poster = data.results?.[0]?.poster_path;
   if (poster) {
    const fullUrl = `https://image.tmdb.org/t/p/w500${poster}`;
    localStorage.setItem(cacheKey, fullUrl);
    return fullUrl;
   }
  } catch (e) {
   console.warn("TV poster fetch failed:", title);
  }
  
  return "";
 }
 
 // Apply thumbnails to all cards
 async function applyThumbnails() {
  const cards = document.querySelectorAll(".movie-card");
  
  for (const card of cards) {
   const anchor = card.closest("a");
   const img = card.querySelector("img");
   const h3 = card.querySelector(".movie-title");
   const year = card.dataset.year || "";
   
   if (!anchor || !img) continue;
   
   let title = "";
   let posterUrl = "";
   
   if (anchor.href.includes("webseries.html")) {
    const url = new URL(anchor.href, location.href);
    title = url.searchParams.get("title")?.trim();
    if (title) posterUrl = await getTVPoster(title, year);
   } else if (anchor.href.includes("movie.html")) {
    title = h3?.innerText?.trim();
    if (title) posterUrl = await getMoviePoster(title, year);
   }
   
   if (posterUrl) img.src = posterUrl;
  }
 }
 
 document.addEventListener("DOMContentLoaded", applyThumbnails);
</script>
 </body>
</html>